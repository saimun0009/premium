<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Advanced EUR/USD Signal Bot (Live Premium)</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Orbitron', sans-serif;
      display: flex;
      margin: 0;
      background: linear-gradient(135deg, #1f1c2c, #928dab);
      color: #fff;
    }
    .chart-container {
      flex: 3;
      border-right: 2px solid rgba(255, 255, 255, 0.15);
      padding: 10px;
    }
    .bot-panel {
      flex: 1;
      padding: 30px;
      background: rgba(255, 255, 255, 0.07);
      backdrop-filter: blur(18px);
      border-left: 2px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      border-radius: 20px 0 0 20px;
    }
    h2 {
      margin-top: 0;
      font-size: 30px;
      font-weight: 800;
      color: #00ffe7;
      text-shadow: 0 0 12px rgba(0, 255, 231, 0.8);
    }
    
    select {
      font-size: 16px;
      padding: 10px;
      border-radius: 30px;
      border: 2px solid transparent;
      background: linear-gradient(120deg, #00ffe7, #0072ff) border-box;
      background-clip: padding-box, border-box;
      background-origin: padding-box, border-box;
      color: #00ffe7;
      outline: none;
      box-shadow: 0 0 15px rgba(0, 255, 231, 0.5);
      transition: all 0.3s ease-in-out;
    }
    select:focus {
      box-shadow: 0 0 25px rgba(0, 255, 231, 0.8);
      background: linear-gradient(120deg, #00ffe7, #ff00d4);
      color: #ffffff;
    }

    #signalOutput {
      font-size: 28px;
      font-weight: bold;
      margin-top: 20px;
      padding: 10px;
      border-radius: 12px;
      text-align: center;
      transition: all 0.3s ease-in-out;
      box-shadow: 0 0 15px rgba(255,255,255,0.2);
    }
    #trendStatus, #explanation {
      margin-top: 15px;
      font-size: 16px;
      color: #f0f0f0;
      opacity: 0.95;
    }
    
    button {
      padding: 14px 30px;
      font-size: 20px;
      font-weight: bold;
      border-radius: 60px;
      border: 2px solid transparent;
      background: linear-gradient(90deg, #00f260, #0575e6) border-box;
      background-clip: padding-box, border-box;
      background-origin: padding-box, border-box;
      color: white;
      cursor: pointer;
      box-shadow: 0 0 20px #00f260, 0 0 40px #0575e6;
      transition: all 0.3s ease-in-out;
      animation: pulse 2.5s infinite ease-in-out;
    }
    button:hover {
      transform: scale(1.08);
      background: linear-gradient(270deg, #0575e6, #00f260);
      box-shadow: 0 0 30px #00f260, 0 0 50px #0575e6;
    }

    @keyframes pulse {
      0%, 100% {
        box-shadow: 0 0 20px #00f260;
      }
      50% {
        box-shadow: 0 0 30px #00ffe7;
      }
    }
    .signal-buy {
      background: rgba(0, 255, 128, 0.25);
      border: 2px solid #00ff80;
      box-shadow: 0 0 25px #00ff80;
      color: #00ff80;
    }
    .signal-sell {
      background: rgba(255, 80, 80, 0.25);
      border: 2px solid #ff5050;
      box-shadow: 0 0 25px #ff5050;
      color: #ff5050;
    }
    .signal-hold {
      background: rgba(255, 221, 0, 0.25);
      border: 2px solid #ffdd00;
      box-shadow: 0 0 25px #ffdd00;
      color: #ffdd00;
    }
</style>
</head>
<body>

  <div class="chart-container">
    <!-- TradingView Widget BEGIN -->
    <div class="tradingview-widget-container">
      <div id="tradingview_eurusd"></div>
      <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
      <script type="text/javascript">
      new TradingView.widget({
        "width": "100%",
        "height": 600,
        "symbol": "FX_IDC:EURUSD",
        "interval": "1",
        "timezone": "Etc/UTC",
        "theme": "dark",
        "style": "1",
        "locale": "en",
        "toolbar_bg": "#0f2027",
        "enable_publishing": false,
        "allow_symbol_change": false,
        "container_id": "tradingview_eurusd"
      });
      </script>
    </div>
    <!-- TradingView Widget END -->
  </div>

  <div class="bot-panel">
    <h2>ü§ñ Super EUR/USD Signal Bot (Premium)</h2>
    
    <label for="tradeDuration">Trade Duration:</label>
    <select id="tradeDuration">
      <option value="1">1 Minute</option>
      <option value="3">3 Minutes</option>
      <option value="5">5 Minutes</option>
      <option value="10">10 Minutes</option>
    </select>
    <br><br>
    <button onclick="startBot()">Start Smart Analysis</button>
    
    <div id="signalOutput">Signal: --</div>
    <div id="trendStatus">Trend: --</div>
    <div id="explanation" style="text-align:center; font-size: 18px; margin-top: 30px; color: #00ffe7; text-shadow: 0 0 10px #00ffe7;">Owner: Saimun</div>
  </div>

  <script>
    let running = false;

    function isMarketOpen() {
      const now = new Date();
      const day = now.getUTCDay();
      const hour = now.getUTCHours();
      return day >= 1 && day <= 5 && hour >= 0 && hour < 22;
    }

    async function fetchLivePrice() {
      const response = await fetch("https://api.twelvedata.com/time_series?symbol=EUR/USD&interval=1min&outputsize=20&apikey=b259ec4ceb574013927efe52382ec2c1");
      const data = await response.json();
      return data.values.map(v => parseFloat(v.close)).reverse();
    }

    function calculateEMA(prices, period) {
      const k = 2 / (period + 1);
      let ema = prices[0];
      for (let i = 1; i < prices.length; i++) {
        ema = prices[i] * k + ema * (1 - k);
      }
      return ema;
    }

    function calculateRSI(prices, period = 14) {
      let gains = 0, losses = 0;
      for (let i = 1; i <= period; i++) {
        const diff = prices[i] - prices[i - 1];
        if (diff >= 0) gains += diff;
        else losses -= diff;
      }
      const avgGain = gains / period;
      const avgLoss = losses / period;
      const rs = avgGain / avgLoss;
      return 100 - (100 / (1 + rs));
    }

    function startBot() {
      if (running) return;
      running = true;
      document.getElementById("signalOutput").innerText = "Analyzing...";
      document.getElementById("trendStatus").innerText = "Checking trend...";
      document.getElementById("explanation").innerText = "Collecting data...";

      if (!isMarketOpen()) {
        document.getElementById("signalOutput").innerText = "Signal: Market Closed ‚ùå";
        document.getElementById("signalOutput").className = "signal-hold";
        document.getElementById("trendStatus").innerText = "Trend: --";
        document.getElementById("explanation").innerText = "Explanation: Market is currently closed.";
        return;
      }

      runLiveAnalysis();
    }

    async function runLiveAnalysis() {
      setInterval(async () => {
        if (!running) return;

        const output = document.getElementById("signalOutput");
        const trendStatus = document.getElementById("trendStatus");
        const explanation = document.getElementById("explanation");

        if (!isMarketOpen()) {
          output.textContent = "Signal: Market Closed ‚ùå";
          output.className = "signal-hold";
          trendStatus.textContent = "Trend: --";
          explanation.textContent = "Explanation: Market is currently closed.";
          return;
        }

        try {
          const prices = await fetchLivePrice();
          const ema5 = calculateEMA(prices.slice(-5), 5);
          const ema20 = calculateEMA(prices, 20);
          const rsi = calculateRSI(prices);

          const last = prices[prices.length - 1];
          const prev = prices[prices.length - 2];
          let pattern = "Neutral";
          if (last > prev && (last - prev) > 0.001) pattern = "Bullish Engulfing";
          if (last < prev && (prev - last) > 0.001) pattern = "Bearish Engulfing";

          let signal = "HOLD üü°";
          let trend = "Sideways ‚û°Ô∏è";
          let reason = `EMA5: ${ema5.toFixed(5)}, EMA20: ${ema20.toFixed(5)}, RSI: ${rsi.toFixed(2)}, Pattern: ${pattern}`;
          let className = "signal-hold";

          if (ema5 > ema20 && rsi > 50 && rsi < 70 && pattern === "Bullish Engulfing") {
            signal = "BUY üìà";
            trend = "Uptrend üìà";
            reason += " ‚Üí Strong bullish setup detected.";
            className = "signal-buy";
          } else if (ema5 < ema20 && rsi < 50 && rsi > 30 && pattern === "Bearish Engulfing") {
            signal = "SELL üìâ";
            trend = "Downtrend üìâ";
            reason += " ‚Üí Strong bearish setup detected.";
            className = "signal-sell";
          } else {
            reason += " ‚Üí No valid signal (filter triggered).";
            className = "signal-hold";
          }

          const nowTime = new Date().toLocaleTimeString();
          const tradeDuration = parseInt(document.getElementById("tradeDuration").value);
          const now = new Date();
          now.setMinutes(now.getMinutes() + tradeDuration);
          const nextCandleTime = now.toLocaleTimeString();

          output.innerText = `Signal: ${signal} (Time: ${nowTime})`;
          output.className = className;
          trendStatus.innerText = `Trend: ${trend}`;
          explanation.innerText = `${reason} üïê Use this signal for Quotex next candle at ${nextCandleTime}`;

        } catch (err) {
          output.textContent = "Signal: Error fetching data ‚ùå";
          output.className = "signal-hold";
          explanation.textContent = "Explanation: " + err.message;
        }
      }, 15000);
    }
  </script>

</body>
</html>
